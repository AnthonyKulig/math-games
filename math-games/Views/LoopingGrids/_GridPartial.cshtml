@model math_games.ViewModels.LoopingGridsIndexViewModel
@using System.Text.Json
@if (Model.ParsedInstructions != null && Model.ParsedInstructions.Count > 0)
{
    <div class="alert alert-info mt-3" id="instructionsStatus">
        <strong>Loaded Instructions:</strong> @string.Join(", ", Model.ParsedInstructions)
        <br />
        <strong>Step:</strong> @Model.Steps/@Model.MaxIterations
    </div>
}
else
{
    <div class="alert alert-warning mt-3" id="instructionsStatus">
        No instructions loaded. Please enter instructions and submit.
    </div>
}
<table class="grid-table" id="grid">
    <tbody>
    @for (var r = 0; r < Model.Rows; r++)
    {
        <tr>
            @for (var c = 0; c < Model.Columns; c++)
            {
                var isActive = Model.Cells[r][c];
                var cls = isActive ? "active" : "inactive";
                var isStart = r == Model.StartRow && c == Model.StartColumn ? "start" : "";
                <td class="cell @cls @isStart" data-r="@r" data-c="@c"></td>
            }
        </tr>
    }
    </tbody>
</table>
<input type="hidden" id="ViewModelJson" name="ViewModelJson" value='@Html.Raw(JsonSerializer.Serialize(Model))' />
